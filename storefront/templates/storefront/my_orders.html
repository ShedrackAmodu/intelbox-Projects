{% extends "storefront/base.html" %}

{% block content %}
<h2>My Orders</h2>

<h3>Pending Orders</h3>
<ul>
    {% for order in pending_orders %}
    <li>
        <button onclick="toggleOrderDetails('{{ order.id }}')">Order ID: {{ order.id }} - Total Price: ${{ order.total_price }}</button>
        <div id="order-details-{{ order.id }}" style="display: none;">
            <p>Status: {{ order.status }}</p>
            <p>Created At: {{ order.created_at }}</p>
            <h4>Items:</h4>
            <ul>
                {% for item in order.orderitem_set.all %}
                <li>{{ item.product.name }} - Quantity: {{ item.quantity }} - Price: ${{ item.price }}</li>
                {% endfor %}
            </ul>
        </div>
    </li>
    {% endfor %}
</ul>

<h3>Delivered Orders</h3>
<ul>
    {% for order in delivered_orders %}
    <li>
        <button onclick="toggleOrderDetails('{{ order.id }}')">Order ID: {{ order.id }} - Total Price: ${{ order.total_price }}</button>
        <div id="order-details-{{ order.id }}" style="display: none;">
            <p>Status: {{ order.status }}</p>
            <p>Created At: {{ order.created_at }}</p>
            <h4>Items:</h4>
            <ul>
                {% for item in order.orderitem_set.all %}
                <li>{{ item.product.name }} - Quantity: {{ item.quantity }} - Price: ${{ item.price }}</li>
                {% endfor %}
            </ul>
        </div>
    </li>
    {% endfor %}
</ul>

<script>
    function toggleOrderDetails(orderId) {
        const detailsDiv = document.getElementById('order-details-' + orderId);
        detailsDiv.style.display = detailsDiv.style.display === 'none' ? 'block' : 'none';
    }
</script>
{% endblock %}

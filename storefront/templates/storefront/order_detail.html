{% extends "storefront/base.html" %}

{% block content %}
<h2>Order Details</h2>
<p><strong>Order ID:</strong> {{ order.id }}</p>
<p><strong>Status:</strong> {{ order.status }}</p>
<p><strong>Total Price:</strong> ${{ order.total_price }}</p>
<p><strong>Created At:</strong> {{ order.created_at }}</p>

<h3>Items</h3>
<ul>
    {% for item in order_items %}
    <li>{{ item.product.name }} - Quantity: {{ item.quantity }} - Price: ${{ item.price }}</li>
    {% endfor %}
</ul>

{% if request.user.is_staff %}
<form method="post" action="{% url 'update_order_status' order.id %}">
    {% csrf_token %}
    <label for="status">Update Status:</label>
    <select name="status" id="status">
        <option value="pending" {% if order.status == 'pending' %}selected{% endif %}>Pending</option>
        <option value="delivered" {% if order.status == 'delivered' %}selected{% endif %}>Delivered</option>
    </select>
    <button type="submit">Update</button>
</form>
{% endif %}
{% endblock %}
